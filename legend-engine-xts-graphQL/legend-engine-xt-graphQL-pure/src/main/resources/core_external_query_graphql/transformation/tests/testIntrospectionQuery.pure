import meta::external::query::graphQL::transformation::introspection::tests::*;

Class {doc.doc = 'Firm class representing a physical entity of Firm'} meta::external::query::graphQL::transformation::introspection::tests::Firm
{
  {doc.doc = 'Legal name of the firm', doc.doc = 'Second legal name of the firm'} legalName : String[1];
  {doc.doc = 'All employees of the firm'} employees : meta::external::query::graphQL::transformation::introspection::tests::Person[*];
  {doc.doc = 'Is firm a public entity?'} isPublicEntity: Boolean[1];
  {doc.doc = 'Type of the firm'} firmType: Firm_Type[1];
  anyProperty: Any[1];
  anyQualifiedProperty() {'LegalName: ' + $this.legalName}: Any[1];
}

Enum meta::external::query::graphQL::transformation::introspection::tests::Firm_Type
{
  {doc.doc = 'LLC is a business structure that protects its owners from personal responsibility for its debts or liabilities.'} LLC,
  {doc.doc = 'CORP is a legal entity that is separate and distinct from its owners.'} CORP
}

Class meta::external::query::graphQL::transformation::introspection::tests::Person
{
  {doc.doc = 'Employee Id'} id: Integer[1];
  {doc.doc = 'First name of the employee'} firstName : String[1];
  {doc.doc = 'Last name of the employee'} lastName : String[1];
  date : Date[1];
  dateTime : DateTime[1];
  strictDate: StrictDate[1];
  decimal: Decimal[1];
  number: Number[1];
}
Class meta::external::query::graphQL::transformation::introspection::tests::Domain extends meta::external::query::graphQL::transformation::introspection::BaseGraphQLType
{
  firmByLegalName(legalName : String[1])
  {
    Firm.all()->filter(f|$f.legalName == $legalName)->first()
  }: Firm[0..1];

}

Class meta::external::query::graphQL::transformation::introspection::tests::Domain2 extends meta::external::query::graphQL::transformation::introspection::BaseGraphQLType
{
  firmByLegalNames(legalNames : String[*])
  {
    Firm.all()->filter(f|$f.legalName->in($legalNames))
  }: Firm[*];
}

function <<test.Test>> meta::external::query::graphQL::transformation::introspection::tests::testSimpleIntrospection():Boolean[1]
{
  let query = meta::external::query::graphQL::transformation::queryToPure::tests::buildIntrospectionQuery();
  let strSresult = meta::external::query::graphQL::transformation::introspection::graphQLIntrospectionQuery(Firm, $query);
  assertJsonStringsEqual(
    '{"__schema":{"types":[{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"BigDecimal","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Boolean","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Date","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"DateTime","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"Firm class representing a physical entity of Firm","interfaces":[],"name":"Firm","fields":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"Legal name of the firm\nSecond legal name of the firm","isDeprecated":false,"deprecationReason":null,"name":"legalName","args":[]},{"type":{"kind":"LIST","ofType":{"kind":"OBJECT","ofType":null,"name":"Person"},"name":null},"description":"All employees of the firm","isDeprecated":false,"deprecationReason":null,"name":"employees","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Boolean"},"name":null},"description":"Is firm a public entity?","isDeprecated":false,"deprecationReason":null,"name":"isPublicEntity","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"ENUM","ofType":null,"name":"Firm_Type"},"name":null},"description":"Type of the firm","isDeprecated":false,"deprecationReason":null,"name":"firmType","args":[]}]},{"inputFields":[],"possibleTypes":[],"kind":"ENUM","enumValues":[{"description":"LLC is a business structure that protects its owners from personal responsibility for its debts or liabilities.","deprecationReason":null,"isDeprecated":false,"name":"LLC"},{"description":"CORP is a legal entity that is separate and distinct from its owners.","deprecationReason":null,"isDeprecated":false,"name":"CORP"}],"description":"","interfaces":[],"name":"Firm_Type","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Float","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Int","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Number","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"","interfaces":[],"name":"Person","fields":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Int"},"name":null},"description":"Employee Id","isDeprecated":false,"deprecationReason":null,"name":"id","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"First name of the employee","isDeprecated":false,"deprecationReason":null,"name":"firstName","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"Last name of the employee","isDeprecated":false,"deprecationReason":null,"name":"lastName","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Date"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"date","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"DateTime"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"dateTime","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"StrictDate"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"strictDate","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"BigDecimal"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"decimal","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Number"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"number","args":[]}]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"StrictDate","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"String","fields":[]}],"directives":[{"locations":["FIELD"],"description":"A preliminary test directive to ensure the working of directives in a query","args":[],"name":"echo"},{"locations":["FIELD"],"description":"Directive to return total number of records for a field excluding any pagination i.e. limit, offset, pageNumber, pageSize, etc. parameters while computing but including all other specified filters such as name, age, country, etc. The directive is currently supported at a root level field.","args":[],"name":"totalCount"}],"queryType":{"name":"Firm"},"mutationType":null}}', 
    $strSresult
  );
}

function <<test.Test>> meta::external::query::graphQL::transformation::introspection::tests::testIntrospectionWithQualified():Boolean[1]
{
  let query = meta::external::query::graphQL::transformation::queryToPure::tests::buildIntrospectionQuery();
  let strSresult = meta::external::query::graphQL::transformation::introspection::graphQLIntrospectionQuery(meta::external::query::graphQL::transformation::introspection::tests::Domain, $query);
  assertJsonStringsEqual(
    '{"__schema":{"types":[{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"BigDecimal","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Boolean","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Date","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"DateTime","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"","interfaces":[],"name":"Domain","fields":[{"type":{"kind":"OBJECT","ofType":null,"name":"Firm"},"description":"","isDeprecated":false,"deprecationReason":null,"name":"firmByLegalName","args":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":null,"name":"legalName","defaultValue":null}]}]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"Firm class representing a physical entity of Firm","interfaces":[],"name":"Firm","fields":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"Legal name of the firm\nSecond legal name of the firm","isDeprecated":false,"deprecationReason":null,"name":"legalName","args":[]},{"type":{"kind":"LIST","ofType":{"kind":"OBJECT","ofType":null,"name":"Person"},"name":null},"description":"All employees of the firm","isDeprecated":false,"deprecationReason":null,"name":"employees","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Boolean"},"name":null},"description":"Is firm a public entity?","isDeprecated":false,"deprecationReason":null,"name":"isPublicEntity","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"ENUM","ofType":null,"name":"Firm_Type"},"name":null},"description":"Type of the firm","isDeprecated":false,"deprecationReason":null,"name":"firmType","args":[]}]},{"inputFields":[],"possibleTypes":[],"kind":"ENUM","enumValues":[{"description":"LLC is a business structure that protects its owners from personal responsibility for its debts or liabilities.","deprecationReason":null,"isDeprecated":false,"name":"LLC"},{"description":"CORP is a legal entity that is separate and distinct from its owners.","deprecationReason":null,"isDeprecated":false,"name":"CORP"}],"description":"","interfaces":[],"name":"Firm_Type","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Float","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Int","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Number","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"","interfaces":[],"name":"Person","fields":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Int"},"name":null},"description":"Employee Id","isDeprecated":false,"deprecationReason":null,"name":"id","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"First name of the employee","isDeprecated":false,"deprecationReason":null,"name":"firstName","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"Last name of the employee","isDeprecated":false,"deprecationReason":null,"name":"lastName","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Date"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"date","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"DateTime"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"dateTime","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"StrictDate"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"strictDate","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"BigDecimal"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"decimal","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Number"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"number","args":[]}]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"StrictDate","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"String","fields":[]}],"directives":[{"locations":["FIELD"],"description":"A preliminary test directive to ensure the working of directives in a query","args":[],"name":"echo"},{"locations":["FIELD"],"description":"Directive to return total number of records for a field excluding any pagination i.e. limit, offset, pageNumber, pageSize, etc. parameters while computing but including all other specified filters such as name, age, country, etc. The directive is currently supported at a root level field.","args":[],"name":"totalCount"}],"queryType":{"name":"Domain"},"mutationType":null}}', 
    $strSresult
  );
}

function <<test.Test>> meta::external::query::graphQL::transformation::introspection::tests::testIntrospectionListArguments():Boolean[1]
{
  let query = meta::external::query::graphQL::transformation::queryToPure::tests::buildIntrospectionQuery();
  let strSresult = meta::external::query::graphQL::transformation::introspection::graphQLIntrospectionQuery(meta::external::query::graphQL::transformation::introspection::tests::Domain2, $query);
  assertJsonStringsEqual(
    '{"__schema":{"types":[{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"BigDecimal","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Boolean","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Date","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"DateTime","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"","interfaces":[],"name":"Domain2","fields":[{"type":{"kind":"LIST","ofType":{"kind":"OBJECT","ofType":null,"name":"Firm"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"firmByLegalNames","args":[{"type":{"kind":"LIST","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":null,"name":"legalNames","defaultValue":null}]}]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"Firm class representing a physical entity of Firm","interfaces":[],"name":"Firm","fields":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"Legal name of the firm\nSecond legal name of the firm","isDeprecated":false,"deprecationReason":null,"name":"legalName","args":[]},{"type":{"kind":"LIST","ofType":{"kind":"OBJECT","ofType":null,"name":"Person"},"name":null},"description":"All employees of the firm","isDeprecated":false,"deprecationReason":null,"name":"employees","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Boolean"},"name":null},"description":"Is firm a public entity?","isDeprecated":false,"deprecationReason":null,"name":"isPublicEntity","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"ENUM","ofType":null,"name":"Firm_Type"},"name":null},"description":"Type of the firm","isDeprecated":false,"deprecationReason":null,"name":"firmType","args":[]}]},{"inputFields":[],"possibleTypes":[],"kind":"ENUM","enumValues":[{"description":"LLC is a business structure that protects its owners from personal responsibility for its debts or liabilities.","deprecationReason":null,"isDeprecated":false,"name":"LLC"},{"description":"CORP is a legal entity that is separate and distinct from its owners.","deprecationReason":null,"isDeprecated":false,"name":"CORP"}],"description":"","interfaces":[],"name":"Firm_Type","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Float","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Int","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"Number","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"OBJECT","enumValues":[],"description":"","interfaces":[],"name":"Person","fields":[{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Int"},"name":null},"description":"Employee Id","isDeprecated":false,"deprecationReason":null,"name":"id","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"First name of the employee","isDeprecated":false,"deprecationReason":null,"name":"firstName","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"String"},"name":null},"description":"Last name of the employee","isDeprecated":false,"deprecationReason":null,"name":"lastName","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Date"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"date","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"DateTime"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"dateTime","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"StrictDate"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"strictDate","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"BigDecimal"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"decimal","args":[]},{"type":{"kind":"NON_NULL","ofType":{"kind":"SCALAR","ofType":null,"name":"Number"},"name":null},"description":"","isDeprecated":false,"deprecationReason":null,"name":"number","args":[]}]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"StrictDate","fields":[]},{"inputFields":[],"possibleTypes":[],"kind":"SCALAR","enumValues":[],"description":null,"interfaces":[],"name":"String","fields":[]}],"directives":[{"locations":["FIELD"],"description":"A preliminary test directive to ensure the working of directives in a query","args":[],"name":"echo"},{"locations":["FIELD"],"description":"Directive to return total number of records for a field excluding any pagination i.e. limit, offset, pageNumber, pageSize, etc. parameters while computing but including all other specified filters such as name, age, country, etc. The directive is currently supported at a root level field.","args":[],"name":"totalCount"}],"queryType":{"name":"Domain2"},"mutationType":null}}', 
    $strSresult
  );
}
